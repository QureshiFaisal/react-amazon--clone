'use strict';
var test = require('tape')
var bindexOf = require('../')

var b = new Buffer('abcdef');
var buf_a = new Buffer('a');
var buf_bc = new Buffer('bc');
var buf_f = new Buffer('f');
var buf_z = new Buffer('z');
var buf_empty = new Buffer('');

test('node 6 buffer indexOf tests', function(t) {
  t.equal(bindexOf(b, 'a'), 0);
  t.equal(bindexOf(b, 'a', 1), -1);
  t.equal(bindexOf(b, 'a', -1), -1);
  t.equal(bindexOf(b, 'a', -4), -1);
  t.equal(bindexOf(b, 'a', -b.length), 0);
  t.equal(bindexOf(b, 'a', NaN), 0);
  t.equal(bindexOf(b, 'a', -Infinity), 0);
  t.equal(bindexOf(b, 'a', Infinity), -1);
  t.equal(bindexOf(b, 'bc'), 1);
  t.equal(bindexOf(b, 'bc', 2), -1);
  t.equal(bindexOf(b, 'bc', -1), -1);
  t.equal(bindexOf(b, 'bc', -3), -1);
  t.equal(bindexOf(b, 'bc', -5), 1);
  t.equal(bindexOf(b, 'bc', NaN), 1);
  t.equal(bindexOf(b, 'bc', -Infinity), 1);
  t.equal(bindexOf(b, 'bc', Infinity), -1);
  t.equal(bindexOf(b, 'f'), b.length - 1);
  t.equal(bindexOf(b, 'z'), -1);
  t.equal(bindexOf(b, ''), -1);
  t.equal(bindexOf(b, '', 1), -1);
  t.equal(bindexOf(b, '', b.length + 1), -1);
  t.equal(bindexOf(b, '', Infinity), -1);
  t.equal(bindexOf(b, buf_a), 0);
  t.equal(bindexOf(b, buf_a, 1), -1);
  t.equal(bindexOf(b, buf_a, -1), -1);
  t.equal(bindexOf(b, buf_a, -4), -1);
  t.equal(bindexOf(b, buf_a, -b.length), 0);
  t.equal(bindexOf(b, buf_a, NaN), 0);
  t.equal(bindexOf(b, buf_a, -Infinity), 0);
  t.equal(bindexOf(b, buf_a, Infinity), -1);
  t.equal(bindexOf(b, buf_bc), 1);
  t.equal(bindexOf(b, buf_bc, 2), -1);
  t.equal(bindexOf(b, buf_bc, -1), -1);
  t.equal(bindexOf(b, buf_bc, -3), -1);
  t.equal(bindexOf(b, buf_bc, -5), 1);
  t.equal(bindexOf(b, buf_bc, NaN), 1);
  t.equal(bindexOf(b, buf_bc, -Infinity), 1);
  t.equal(bindexOf(b, buf_bc, Infinity), -1);
  t.equal(bindexOf(b, buf_f), b.length - 1);
  t.equal(bindexOf(b, buf_z), -1);
  t.equal(bindexOf(b, buf_empty), -1);
  t.equal(bindexOf(b, buf_empty, 1), -1);
  t.equal(bindexOf(b, buf_empty, b.length + 1), -1);
  t.equal(bindexOf(b, buf_empty, Infinity), -1);
  t.equal(bindexOf(b, 0x61), 0);
  t.equal(bindexOf(b, 0x61, 1), -1);
  t.equal(bindexOf(b, 0x61, -1), -1);
  t.equal(bindexOf(b, 0x61, -4), -1);
  t.equal(bindexOf(b, 0x61, -b.length), 0);
  t.equal(bindexOf(b, 0x61, NaN), 0);
  t.equal(bindexOf(b, 0x61, -Infinity), 0);
  t.equal(bindexOf(b, 0x61, Infinity), -1);
  t.equal(bindexOf(b, 0x0), -1);

  // test offsets
  t.equal(bindexOf(b, 'd', 2), 3);
  t.equal(bindexOf(b, 'f', 5), 5);
  t.equal(bindexOf(b, 'f', -1), 5);
  t.equal(bindexOf(b, '